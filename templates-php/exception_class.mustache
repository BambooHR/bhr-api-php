<?php
/**
 * {{className}} Exception
 * PHP version 8.1
 *
 * @category Class
 * @package  BhrSdk\Exceptions
 * @author   BambooHR
 * @link     https://www.bamboohr.com/api/documentation/
 */

 /**
 * NOTE: This class is auto generated by the update_error_docs script
 */

namespace BhrSdk\Exceptions;

/**
 * {{className}} Exception Class
 *
 * {{description}}
 *
 * @category Class
 * @package  BhrSdk\Exceptions
 * @author   BambooHR
 * @link     https://www.bamboohr.com/api/documentation/
 */
class {{className}}Exception extends {{parentClass}} {
	/**
	 * Get potential causes
	 *
	 * @return array<string> List of potential causes
	 */
	public function getPotentialCauses(): array {
		return [
			{{#causes}}
			"{{.}}",
			{{/causes}}
		];
	}

	/**
	 * Get debugging tips
	 *
	 * @return array<string> List of debugging tips
	 */
	public function getDebuggingTips(): array {
		return [
			{{#tips}}
			"{{.}}",
			{{/tips}}
		];
	}

	/**
	 * Constructor
	 *
	 * @param string $message  The error message
	 * @param array  $responseHeaders Additional error data
	 * @param string $responseBody Additional error data
	 */
	public function __construct(string $message, array $responseHeaders = [], $responseBody = null) {
		// Initialize with the parent constructor first
		parent::__construct($message, {{statusCode}}, $responseHeaders, $responseBody);

		// Format a detailed error message with causes and tips if using default message
		$detailedMessage = \BhrSdk\ApiErrorHelper::formatDetailedErrorMessage(
			"{{description}}",
			$this->getPotentialCauses(),
			$this->getDebuggingTips()
		);

		// Update the message
		$this->message = !empty($message) ? $message . "\n\n{$detailedMessage}" : $detailedMessage;
	}
}
