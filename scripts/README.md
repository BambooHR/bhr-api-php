# Scripts Directory

This directory contains utility scripts for maintaining the BambooHR API PHP SDK.

## cleanup_obsolete_files.sh

**Purpose:** Automatically removes files that are no longer generated by the OpenAPI Generator.

**How it works:**

1. Before generation, the Makefile backs up the current `.openapi-generator/FILES` manifest to `.openapi-generator/FILES.old`
2. After generation, this script compares the old and new FILES manifests
3. Files that exist in the old manifest but not in the new one are considered obsolete
4. The script prompts for confirmation before deleting obsolete files (unless `--force` is used)
5. Empty directories are cleaned up automatically

**Usage:**

Automatic (runs as part of `make generate` with `--force` flag for unattended operation):

```bash
make generate
```

Manual with confirmation prompt:

```bash
make cleanup-obsolete
# or directly:
./scripts/cleanup_obsolete_files.sh
```

Manual without confirmation (force mode for CI/unattended runs):

```bash
./scripts/cleanup_obsolete_files.sh --force
# or short form:
./scripts/cleanup_obsolete_files.sh -f
```

**First Run:**
On the first run after adding this script, there will be no `.openapi-generator/FILES.old` backup, so the script will skip cleanup. This is expected behavior. Subsequent runs will properly detect and remove obsolete files.

**Safety:**

- The script asks for confirmation before deleting files (unless `--force` is used)
- Only files listed in the old FILES manifest are considered for deletion
- Custom files you've added (not generated by OpenAPI Generator) are never touched
- Use `--force` flag for unattended/CI runs to skip confirmation prompts

## Other Scripts

- **normalize_line_breaks.sh** - Normalizes line endings across generated files
- **update_error_docs.sh** - Generates error documentation
- **add_custom_headers_to_api_docs.sh** - Adds custom headers to API documentation
- **generate_error_docs.php** - PHP script for generating error documentation
- **generate_exceptions.php** - PHP script for generating exception classes
