<?php
/**
 * PayloadTooLarge Exception
 * PHP version 8.1
 *
 * @category Class
 * @package  BhrSdk\Exceptions
 * @author   BambooHR
 * @link     https://www.bamboohr.com/api/documentation/
 */

 /**
 * NOTE: This class is auto generated by the update_error_docs script
 */

namespace BhrSdk\Exceptions;

/**
 * PayloadTooLarge Exception Class
 *
 * Payload too large
 *
 * @category Class
 * @package  BhrSdk\Exceptions
 * @author   BambooHR
 * @link     https://www.bamboohr.com/api/documentation/
 */
class PayloadTooLargeException extends ClientException {
	/**
	 * Get potential causes
	 *
	 * @return array<string> List of potential causes
	 */
	public function getPotentialCauses(): array {
		return [
			"Request body exceeds the server's size limit",
			"File upload is too large",
			"Batch operation contains too many items",
		];
	}

	/**
	 * Get debugging tips
	 *
	 * @return array<string> List of debugging tips
	 */
	public function getDebuggingTips(): array {
		return [
			"Reduce the size of your request payload",
			"Split large requests into smaller chunks",
			"Compress data before sending if appropriate",
			"Check API documentation for size limits",
		];
	}

	/**
	 * Constructor
	 *
	 * @param string $message  The error message
	 * @param array  $responseHeaders Additional error data
	 * @param string $responseBody Additional error data
	 */
	public function __construct(string $message, array $responseHeaders = [], $responseBody = null) {
		// Initialize with the parent constructor first
		parent::__construct($message, 413, $responseHeaders, $responseBody);

		// Format a detailed error message with causes and tips if using default message
		$detailedMessage = \BhrSdk\ApiErrorHelper::formatDetailedErrorMessage(
			"Payload too large",
			$this->getPotentialCauses(),
			$this->getDebuggingTips()
		);

		// Update the message
		$this->message = !empty($message) ? $message . "\n\n{$detailedMessage}" : $detailedMessage;
	}
}
