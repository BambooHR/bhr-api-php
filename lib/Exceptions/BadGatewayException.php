<?php
/**
 * BadGateway Exception
 * PHP version 8.1
 *
 * @category Class
 * @package  BhrSdk\Exceptions
 * @author   BambooHR
 * @link     https://www.bamboohr.com/api/documentation/
 */

 /**
 * NOTE: This class is auto generated by the update_error_docs script
 */

namespace BhrSdk\Exceptions;

/**
 * BadGateway Exception Class
 *
 * Bad gateway
 *
 * @category Class
 * @package  BhrSdk\Exceptions
 * @author   BambooHR
 * @link     https://www.bamboohr.com/api/documentation/
 */
class BadGatewayException extends ServerException {
	/**
	 * Get potential causes
	 *
	 * @return array<string> List of potential causes
	 */
	public function getPotentialCauses(): array {
		return [
			"The server received an invalid response from an upstream server",
			"Proxy or gateway configuration issues",
			"Temporary communication failure between servers",
		];
	}

	/**
	 * Get debugging tips
	 *
	 * @return array<string> List of debugging tips
	 */
	public function getDebuggingTips(): array {
		return [
			"Retry the request after a delay",
			"Implement automatic retry logic with backoff",
			"Check if the service is experiencing known issues",
			"Verify network connectivity between your client and the API",
		];
	}

	/**
	 * Constructor
	 *
	 * @param string $message  The error message
	 * @param array  $responseHeaders Additional error data
	 * @param string $responseBody Additional error data
	 */
	public function __construct(string $message, array $responseHeaders = [], $responseBody = null) {
		// Initialize with the parent constructor first
		parent::__construct($message, 502, $responseHeaders, $responseBody);

		// Format a detailed error message with causes and tips if using default message
		$detailedMessage = \BhrSdk\ApiErrorHelper::formatDetailedErrorMessage(
			"Bad gateway",
			$this->getPotentialCauses(),
			$this->getDebuggingTips()
		);

		// Update the message
		$this->message = !empty($message) ? $message . "\n\n{$detailedMessage}" : $detailedMessage;
	}
}
