<?php
declare(strict_types=1);
/**
 * InsufficientStorage Exception
 * PHP version 8.1
 *
 * @category Class
 * @package  BhrSdk\Exceptions
 * @author   BambooHR
 * @link     https://www.bamboohr.com/api/documentation/
 */

 /**
 * NOTE: This class is auto generated by the update_error_docs script
 */

namespace BhrSdk\Exceptions;

/**
 * InsufficientStorage Exception Class
 *
 * Insufficient storage
 *
 * @category Class
 * @package  BhrSdk\Exceptions
 * @author   BambooHR
 * @link     https://www.bamboohr.com/api/documentation/
 */
class InsufficientStorageException extends ServerException {
	/**
	 * Get potential causes
	 *
	 * @return array<string> List of potential causes
	 */
	public function getPotentialCauses(): array {
		return [
			"Server storage capacity has been reached",
			"Quota limits exceeded for your account",
			"Temporary resource constraints on the server",
		];
	}

	/**
	 * Get debugging tips
	 *
	 * @return array<string> List of debugging tips
	 */
	public function getDebuggingTips(): array {
		return [
			"Remove unnecessary data if possible",
			"Contact support to discuss storage limitations",
			"Check if there are unused resources that can be deleted",
		];
	}

	/**
	 * Constructor
	 *
	 * @param string $message  The error message
	 * @param array  $responseHeaders Additional error data
	 * @param string $responseBody Additional error data
	 */
	public function __construct(string $message, array $responseHeaders = [], $responseBody = null) {
		// Initialize with the parent constructor first
		parent::__construct($message, 507, $responseHeaders, $responseBody);

		// Format a detailed error message with causes and tips if using default message
		$detailedMessage = \BhrSdk\ApiErrorHelper::formatDetailedErrorMessage(
			"Insufficient storage",
			$this->getPotentialCauses(),
			$this->getDebuggingTips()
		);

		// Update the message
		$this->message = !empty($message) ? $message . "\n\n{$detailedMessage}" : $detailedMessage;
	}
}
